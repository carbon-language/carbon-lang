<!DOCTYPE html>
<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->
<html>
<head>
  <title>Carbon: Login</title>
  <script src="/__/firebase/7.14.0/firebase-app.js"></script>
  <script src="/__/firebase/7.14.0/firebase-auth.js"></script>
  <script type="text/javascript">
    // See https://carbon-lang.dev/__/firebase/init.js.
    // We customize authDomain.
    firebase.initializeApp({
      "apiKey": "AIzaSyDyAAcQeReDNXVUd_ZdkSzYgqIDJe-kPK8",
      "authDomain": "carbon-lang.dev",
      "databaseURL": "https://carbon-language.firebaseio.com",
      "messagingSenderId": "985662022432",
      "projectId": "carbon-language",
      "storageBucket": "carbon-language.appspot.com"
    });

    function login() {
      var provider = new firebase.auth.GithubAuthProvider();
      firebase.auth().signInWithPopup(provider).then(function(result) {
        var user = result.user;
        user.getIdToken(true).then(function(token) {
          document.cookie = '__session=' + token + ';max-age=25920000';
          window.location.href = window.location.href.replace(
              "/login.html", "/index.html");
        });
      });
    };

    window.onload = function() {
      document.cookie = "__session=; expires=Thu, 01 Jan 1970 00:00:00 GMT";
      firebase.auth().signOut();
    };
  </script>
</head>
<body>
<p>Currently logged out.</p>

<button onclick="login()">Log in using GitHub</button>
</body>
</html>
