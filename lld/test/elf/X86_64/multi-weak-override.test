# Test for weak symbol getting overridden
RUN: lld -flavor gnu -target x86_64 %p/Inputs/multi-weak.o \
RUN:     %p/Inputs/multi-ovrd.o -o %t -e main --noinhibit-exec
RUN: llvm-nm -n %t | FileCheck -check-prefix=WEAKORDER %s
RUN: lld -flavor gnu -target x86_64 %p/Inputs/multi-weak.o \
RUN:    %p/Inputs/multi-ovrd.o -emit-yaml -o %t2 --noinhibit-exec
RUN: FileCheck -check-prefix=WEAKATOMSORDER %s < %t2

WEAKORDER: 0040020c T f
WEAKORDER: 0040021c T g

WEAKATOMSORDER:  - ref-name:        {{[A-Z0-9]+}}
WEAKATOMSORDER:  - ref-name:        {{[A-Z0-9]+}}
WEAKATOMSORDER:  - name:            f
WEAKATOMSORDER:  - name:            g

