; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; Test that update_llc_test_checks.py can run pre-processing commands.
; RUN: llc < %s -mtriple=x86_64-unknown-unknown | FileCheck %s --check-prefix=CHECK-ADD
; RUN: sed 's/add /sub /g' %s | llc -mtriple=x86_64-unknown-unknown \
; RUN:   | FileCheck %s --check-prefix=CHECK-SUB
; Check that multiple pre-processing commands are handled
; RUN: sed 's/add /sub /g' %s | sed 's/i64 /i16 /g' | cat \
; RUN:  | llc -mtriple=x86_64-unknown-unknown | FileCheck %s --check-prefix=CHECK-SUB-I16

define i64 @test_add_constant(i64 %arg) nounwind {
; CHECK-ADD-LABEL: test_add_constant:
; CHECK-ADD:       # %bb.0: # %entry
; CHECK-ADD-NEXT:    leaq 6(%rdi), %rax
; CHECK-ADD-NEXT:    retq
;
; CHECK-SUB-LABEL: test_add_constant:
; CHECK-SUB:       # %bb.0: # %entry
; CHECK-SUB-NEXT:    leaq -6(%rdi), %rax
; CHECK-SUB-NEXT:    retq
;
; CHECK-SUB-I16-LABEL: test_add_constant:
; CHECK-SUB-I16:       # %bb.0: # %entry
; CHECK-SUB-I16-NEXT:    # kill: def $edi killed $edi def $rdi
; CHECK-SUB-I16-NEXT:    leal -6(%rdi), %eax
; CHECK-SUB-I16-NEXT:    # kill: def $ax killed $ax killed $eax
; CHECK-SUB-I16-NEXT:    retq
entry:
  %a1 = add i64 %arg, 1
  %a2 = add i64 %a1, 2
  %a3 = add i64 %a2, 3
  ret i64 %a3
}
