; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -verify-machineinstrs -mcpu=pwr9 -mattr=+vsx \
; RUN:   -mtriple=powerpc64le-unknown-linux-gnu < %s | FileCheck %s

define <2 x double> @loadChainHasUser(<2 x double>* %p1, <2 x double> %v2) {
; CHECK-LABEL: loadChainHasUser:
; CHECK:       # %bb.0:
; CHECK-NEXT:    lxvd2x 0, 0, 3
; CHECK-NEXT:    stxv 34, 0(3)
; CHECK-NEXT:    xxlor 34, 0, 0
; CHECK-NEXT:    blr
  %v1 = load <2 x double>, <2 x double>* %p1
  store <2 x double> %v2, <2 x double>* %p1, align 16
  %v3 = shufflevector <2 x double> %v1, <2 x double> %v1, <2 x i32> < i32 1, i32 0>
  ret <2 x double> %v3
}
