# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=powerpc64le-unknown-linux-gnu -mcpu=pwr9 -run-pass=postmisched -o - %s | FileCheck %s
---
# Check that postmisched's TopDepthReduce heuristic moves the MULLD later
# because of the dependency on x5
name: test
body: |
  bb.0:
    ; CHECK-LABEL: name: test
    ; CHECK: renamable $x5 = LD 0, killed renamable $x5 :: (load (s64))
    ; CHECK: renamable $x4 = LD 0, killed renamable $x4 :: (load (s64))
    ; CHECK: renamable $x5 = MULLD killed renamable $x5, renamable $x3
    ; CHECK: renamable $x3 = MADDLD8 killed renamable $x4, killed renamable $x3, killed renamable $x5
    renamable $x5 = LD 0, killed renamable $x5 :: (load (s64))
    renamable $x5 = MULLD killed renamable $x5, renamable $x3
    renamable $x4 = LD 0, killed renamable $x4 :: (load (s64))
    renamable $x3 = MADDLD8 killed renamable $x4, killed renamable $x3, killed renamable $x5
...
