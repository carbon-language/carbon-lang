; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=i386-apple-darwin9   | FileCheck %s --check-prefix=i386-darwin9
; RUN: llc < %s -mtriple=x86_64-apple-darwin9 | FileCheck %s --check-prefix=x86_64-darwin9

@x = weak hidden global i32 0		; <i32*> [#uses=1]

define i32 @t() nounwind readonly {
; i386-darwin9-LABEL: t:
; i386-darwin9:       ## %bb.0: ## %entry
; i386-darwin9-NEXT:    movl _x, %eax
; i386-darwin9-NEXT:    retl
;
; x86_64-darwin9-LABEL: t:
; x86_64-darwin9:       ## %bb.0: ## %entry
; x86_64-darwin9-NEXT:    movl _x(%rip), %eax
; x86_64-darwin9-NEXT:    retq
entry:
	%0 = load i32, i32* @x, align 4		; <i32> [#uses=1]
	ret i32 %0
}
