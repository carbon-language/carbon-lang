; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=x86_64-unknown-linux-gnu %s -o - | FileCheck %s

define i8 @_BitScanForward(i32* nocapture %Index, i32 %Mask) {
; CHECK-LABEL: _BitScanForward:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    #APP
; CHECK-NEXT:    bsfl %esi, %ecx
; CHECK-NEXT:    #NO_APP
; CHECK-NEXT:    setne %al
; CHECK-NEXT:    movl %ecx, (%rdi)
; CHECK-NEXT:    retq
entry:
  %0 = tail call { i8, i32 } asm "bsf$(l $2,$1 $| $1,$2$)", "={@ccnz},=r,r,~{dirflag},~{fpsr},~{flags}"(i32 %Mask)
  %asmresult = extractvalue { i8, i32 } %0, 0
  %asmresult1 = extractvalue { i8, i32 } %0, 1
  store i32 %asmresult1, i32* %Index, align 4
  ret i8 %asmresult
}
