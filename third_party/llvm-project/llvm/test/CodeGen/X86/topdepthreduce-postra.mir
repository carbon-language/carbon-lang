# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=x86_64 -enable-post-misched -run-pass=postmisched -o - %s | FileCheck %s
---
# Check that postmisched's TopDepthReduce heuristic moves the DEC32r later
# because of the dependency on eax
name: test
body: |
  bb.0:
    ; CHECK-LABEL: name: test
    ; CHECK: $eax = MOV32rr killed $edi
    ; CHECK: MOV8mi killed renamable $rsi, 1, $noreg, 0, $noreg, 1 :: (store (s8))
    ; CHECK: renamable $eax = DEC32r killed renamable $eax, implicit-def $eflags
    $eax = MOV32rr $edi
    renamable $eax = DEC32r killed renamable $eax, implicit-def $eflags
    MOV8mi killed renamable $rsi, 1, $noreg, 0, $noreg, 1 :: (store (s8))
...
