; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=x86_64-- -combiner-shrink-load-replace-store-with-store=false | FileCheck %s

define void @shrink(i16* %ptr) {
; CHECK-LABEL: shrink:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    movzbl (%rdi), %eax
; CHECK-NEXT:    orl $25600, %eax # imm = 0x6400
; CHECK-NEXT:    movw %ax, (%rdi)
; CHECK-NEXT:    retq
entry:
  %val = load i16, i16* %ptr
  %masked_val = and i16 %val, 255
  %replaced_val = or i16 %masked_val, 25600
  store i16 %replaced_val, i16* %ptr
  ret void
}

