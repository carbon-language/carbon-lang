; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -march=amdgcn -mcpu=gfx900 -verify-machineinstrs < %s | FileCheck -check-prefix=GCN %s
; RUN: llc -global-isel -march=amdgcn -mcpu=gfx900 -verify-machineinstrs < %s | FileCheck -check-prefix=GCN %s

define amdgpu_kernel void @test_s_sethalt() {
; GCN-LABEL: test_s_sethalt:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sethalt 0
; GCN-NEXT:    s_sethalt 1
; GCN-NEXT:    s_sethalt 2
; GCN-NEXT:    s_sethalt 3
; GCN-NEXT:    s_sethalt 4
; GCN-NEXT:    s_sethalt 5
; GCN-NEXT:    s_sethalt 6
; GCN-NEXT:    s_sethalt 7
; GCN-NEXT:    s_endpgm
  call void @llvm.amdgcn.s.sethalt(i32 0)
  call void @llvm.amdgcn.s.sethalt(i32 1)
  call void @llvm.amdgcn.s.sethalt(i32 2)
  call void @llvm.amdgcn.s.sethalt(i32 3)
  call void @llvm.amdgcn.s.sethalt(i32 4)
  call void @llvm.amdgcn.s.sethalt(i32 5)
  call void @llvm.amdgcn.s.sethalt(i32 6)
  call void @llvm.amdgcn.s.sethalt(i32 7)
  ret void
}

declare void @llvm.amdgcn.s.sethalt(i32)
