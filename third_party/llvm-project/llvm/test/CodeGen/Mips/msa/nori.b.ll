; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -march=mips64el -mcpu=mips64r6 -mattr=+msa,+fp64 < %s | FileCheck %s

; Test that simply checks if it will finish when value 255 (-1) appears as
; immediate in 'nori.b' instruction.

; mips.nori.b %dst, %a, imm
; mips.nori.b %dst, %a, -1
; %dst = not (or %a, -1)
; %dst = xor (or %a, -1), -1
; %dst = xor -1, -1
; %dst = 0

define <16 x i8> @foo(<16 x i8> %a) {
; CHECK-LABEL: foo:
; CHECK:       # %bb.0: # %bb2
; CHECK-NEXT:    ldi.b $w0, 0
; CHECK-NEXT:    copy_s.d $2, $w0[0]
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    copy_s.d $3, $w0[1]
bb2:
  %0 = tail call <16 x i8> @llvm.mips.nori.b(<16 x i8> %a, i32 255)
  ret <16 x i8> %0
}

declare <16 x i8> @llvm.mips.nori.b(<16 x i8>, i32)
