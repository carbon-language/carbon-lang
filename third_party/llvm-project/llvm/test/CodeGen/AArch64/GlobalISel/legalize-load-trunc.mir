# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=aarch64 -run-pass=legalizer %s -o - -verify-machineinstrs | FileCheck %s
---
name:            test_load_trunc
stack:
  - { id: 0, type: default, offset: 0, size: 2,
      alignment: 2, stack-id: default, callee-saved-register: '', callee-saved-restored: true,
      debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
body: |
  bb.0.entry:

    ; CHECK-LABEL: name: test_load_trunc
    ; CHECK: [[FRAME_INDEX:%[0-9]+]]:_(p0) = G_FRAME_INDEX %stack.0
    ; CHECK: [[LOAD:%[0-9]+]]:_(s16) = G_LOAD [[FRAME_INDEX]](p0) :: (load (s16))
    ; CHECK: [[ASSERT_ZEXT:%[0-9]+]]:_(s16) = G_ASSERT_ZEXT [[LOAD]], 10
    ; CHECK: [[TRUNC:%[0-9]+]]:_(s1) = G_TRUNC [[ASSERT_ZEXT]](s16)
    ; CHECK: RET_ReallyLR implicit [[TRUNC]](s1)
    %0:_(p0) = G_FRAME_INDEX %stack.0
    %1:_(s10) = G_LOAD %0(p0) :: (load (s10))
    %2:_(s1) = G_TRUNC %1(s10)
    RET_ReallyLR implicit %2(s1)
...
