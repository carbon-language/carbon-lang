; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S -mem2reg -opaque-pointers < %s | FileCheck %s

define i32 @test_same_type() {
; CHECK-LABEL: @test_same_type(
; CHECK-NEXT:    ret i32 0
;
  %p = alloca i32
  store i32 0, ptr %p
  %v = load i32, ptr %p
  ret i32 %v
}

define i16 @test_different_type() {
; CHECK-LABEL: @test_different_type(
; CHECK-NEXT:    [[P:%.*]] = alloca i32, align 4
; CHECK-NEXT:    store i32 0, ptr [[P]], align 4
; CHECK-NEXT:    [[V:%.*]] = load i16, ptr [[P]], align 2
; CHECK-NEXT:    ret i16 [[V]]
;
  %p = alloca i32
  store i32 0, ptr %p
  %v = load i16, ptr %p
  ret i16 %v
}
