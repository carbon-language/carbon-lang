; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -gvn -S | FileCheck %s
; RUN: opt < %s -passes=gvn -S | FileCheck %s

define i32 addrspace(1)* @addrspacecast(i32* %ptr) {
; CHECK-LABEL: @addrspacecast(
; CHECK-NEXT:  block1:
; CHECK-NEXT:    [[Z1:%.*]] = addrspacecast i32* [[PTR:%.*]] to i32 addrspace(1)*
; CHECK-NEXT:    store i32 addrspace(1)* [[Z1]], i32 addrspace(1)** undef
; CHECK-NEXT:    ret i32 addrspace(1)* [[Z1]]
;
block1:
  %z1 = addrspacecast i32* %ptr to i32 addrspace(1)*
  store i32 addrspace(1)* %z1, i32 addrspace(1)** undef
  br label %block2

block2:
  %z2 = addrspacecast i32* %ptr to i32 addrspace(1)*
  ret i32 addrspace(1)* %z2
}
