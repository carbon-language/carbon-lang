; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -instcombine

@_ZN11xercesc_2_5L11gDigitCharsE = external constant [32 x i16], align 2
@_ZN11xercesc_2_5L10gBaseCharsE = external constant [354 x i16], align 2
@_ZN11xercesc_2_5L17gIdeographicCharsE = external constant [7 x i16], align 2
@_ZN11xercesc_2_5L15gCombiningCharsE = external constant [163 x i16], align 2

define i32 @_ZN11xercesc_2_515XMLRangeFactory11buildRangesEv(i32 %x) {
  %a = add i32 %x, add (i32 add (i32 ashr (i32 add (i32 mul (i32 ptrtoint (ptr @_ZN11xercesc_2_5L11gDigitCharsE to i32), i32 -1), i32 ptrtoint (ptr getelementptr inbounds ([32 x i16], ptr @_ZN11xercesc_2_5L11gDigitCharsE, i32 0, i32 30) to i32)), i32 1), i32 ashr (i32 add (i32 mul (i32 ptrtoint (ptr @_ZN11xercesc_2_5L17gIdeographicCharsE to i32), i32 -1), i32 ptrtoint (ptr getelementptr inbounds ([7 x i16], ptr @_ZN11xercesc_2_5L17gIdeographicCharsE, i32 0, i32 4) to i32)), i32 1)), i32 8)
  %b = add i32 %a, %x
  ret i32 %b
}
