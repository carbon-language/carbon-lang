; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -mtriple=amdgcn-amd-amdhsa -instcombine -S | FileCheck %s

; Optimize the intrinsic away if the argument is uniform.
define i32 @test_constant() {
; CHECK-LABEL: @test_constant(
; CHECK-NEXT:    ret i32 99
;
  %call = call i32 @llvm.amdgcn.permlane64(i32 99)
  ret i32 %call
}

declare i32 @llvm.amdgcn.permlane64(i32)
