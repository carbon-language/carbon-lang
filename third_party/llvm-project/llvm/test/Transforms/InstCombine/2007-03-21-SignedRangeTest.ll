; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

; For PR1248

define i1 @test(i32 %tmp6) {
; CHECK-LABEL: @test(
; CHECK-NEXT:    [[TMP1:%.*]] = add i32 [[TMP6:%.*]], 71
; CHECK-NEXT:    [[TMP2:%.*]] = icmp ult i32 [[TMP1]], -12
; CHECK-NEXT:    ret i1 [[TMP2]]
;
  %tmp7 = sdiv i32 %tmp6, 12
  icmp ne i32 %tmp7, -6
  ret i1 %1
}

define <2 x i1> @test_vec(<2 x i32> %tmp6) {
; CHECK-LABEL: @test_vec(
; CHECK-NEXT:    [[TMP1:%.*]] = add <2 x i32> [[TMP6:%.*]], <i32 71, i32 71>
; CHECK-NEXT:    [[TMP2:%.*]] = icmp ult <2 x i32> [[TMP1]], <i32 -12, i32 -12>
; CHECK-NEXT:    ret <2 x i1> [[TMP2]]
;
  %tmp7 = sdiv <2 x i32> %tmp6, <i32 12, i32 12>
  icmp ne <2 x i32> %tmp7, <i32 -6, i32 -6>
  ret <2 x i1> %1
}

