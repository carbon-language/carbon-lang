; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -instcombine -S | FileCheck %s
; PR3439

define i32 @a(i32 %x) nounwind {
; CHECK-LABEL: @a(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[REM:%.*]] = srem i32 [[X:%.*]], 2
; CHECK-NEXT:    [[AND:%.*]] = and i32 [[REM]], 2
; CHECK-NEXT:    ret i32 [[AND]]
;
entry:
  %rem = srem i32 %x, 2
  %and = and i32 %rem, 2
  ret i32 %and
}
