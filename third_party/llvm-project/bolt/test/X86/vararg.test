# Check that a function that references a label inside itself,
# as in the case of vararg handling code generated by GCC 4.5
# and earlier, is recognized as multi-entry.

REQUIRES: x86_64-linux

RUN: %clangxx %cxxflags -no-pie %p/../Inputs/vararg.s -o %t -Wl,-q
RUN: llvm-bolt %t -o /dev/null --print-cfg --print-only=.*printf.* |& FileCheck %s

CHECK: IsSimple    : 0
CHECK: Entry Point
CHECK: Entry Point
