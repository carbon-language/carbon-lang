<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="llvm.css" type="text/css">
  <title>LLVM 2.6 Release Notes</title>
</head>
<body>

<div class="doc_title">LLVM 2.6 Release Notes</div>

<ol>
  <li><a href="#intro">Introduction</a></li>
  <li><a href="#subproj">Sub-project Status Update</a></li>
  <li><a href="#externalproj">External Projects Using LLVM 2.6</a></li>
  <li><a href="#whatsnew">What's New in LLVM 2.6?</a></li>
  <li><a href="GettingStarted.html">Installation Instructions</a></li>
  <li><a href="#portability">Portability and Supported Platforms</a></li>
  <li><a href="#knownproblems">Known Problems</a></li>
  <li><a href="#additionalinfo">Additional Information</a></li>
</ol>

<div class="doc_author">
  <p>Written by the <a href="http://llvm.org">LLVM Team</a></p>
</div>

<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="intro">Introduction</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">

<p>This document contains the release notes for the LLVM Compiler
Infrastructure, release 2.6.  Here we describe the status of LLVM, including
major improvements from the previous release and significant known problems.
All LLVM releases may be downloaded from the <a
href="http://llvm.org/releases/">LLVM releases web site</a>.</p>

<p>For more information about LLVM, including information about the latest
release, please check out the <a href="http://llvm.org/">main LLVM
web site</a>.  If you have questions or comments, the <a
href="http://mail.cs.uiuc.edu/mailman/listinfo/llvmdev">LLVM Developer's Mailing
List</a> is a good place to send them.</p>

<p>Note that if you are reading this file from a Subversion checkout or the
main LLVM web page, this document applies to the <i>next</i> release, not the
current one.  To see the release notes for a specific release, please see the
<a href="http://llvm.org/releases/">releases page</a>.</p>

</div>
 

<!--
Almost dead code.
  include/llvm/Analysis/LiveValues.h => Dan
  lib/Transforms/IPO/MergeFunctions.cpp => consider for 2.8.
  llvm/Analysis/PointerTracking.h => Edwin wants this, consider for 2.8.
-->
 
   
<!-- Unfinished features in 2.6:
  gcc plugin.
  strong phi elim
  variable debug info for optimized code
  postalloc scheduler: anti dependence breaking, hazard recognizer?
  metadata
  loop dependence analysis
  ELF Writer?  How stable?
  <li>PostRA scheduler improvements, ARM adoption (David Goodwin).</li>

 -->

 <!-- for announcement email:
 Logo web page.
 llvm devmtg
 compiler_rt
 klee web page at klee.llvm.org
 Many new papers added to /pubs/
   Mention gcc plugin.

   -->

<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="subproj">Sub-project Status Update</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">
<p>
The LLVM 2.6 distribution currently consists of code from the core LLVM
repository &mdash;which roughly includes the LLVM optimizers, code generators
and supporting tools &mdash; and the llvm-gcc repository.  In addition to this
code, the LLVM Project includes other sub-projects that are in development.  The
two which are the most actively developed are the <a href="#clang">Clang
Project</a> and the <a href="#vmkit">VMKit Project</a>.
</p>

</div>


<!--=========================================================================-->
<div class="doc_subsection">
<a name="clang">Clang: C/C++/Objective-C Frontend Toolkit</a>
</div>

<div class="doc_text">

<p>The <a href="http://clang.llvm.org/">Clang project</a> is an effort to build
a set of new 'LLVM native' front-end technologies for the C family of languages.
LLVM 2.6 is the first release to officially include Clang, and it provides a
production quality C and Objective-C compiler.  If you are interested in fast
compiles and good diagnostics, we encourage you to try it out.</p>

<p>In addition to supporting these languages, C++ support is also <a
href="http://clang.llvm.org/cxx_status.html">well under way</a>, and mainline
Clang is able to parse the libstdc++ 4.2 headers and even codegen simple apps.
If you are interested in Clang C++ support or any other Clang feature, we
strongly encourage you to get involved on the <a 
href="http://lists.cs.uiuc.edu/mailman/listinfo/cfe-dev">Clang front-end mailing
list</a>.</p>

<p>In the LLVM 2.6 time-frame, the Clang team has made many improvements:</p>

<ul>
<li>C and Objective-C support are now considered production quality.</li>
<li>AuroraUX / FreeBSD &amp; OpenBSD Toolchain support.</li>
<li>Most of Objective-C 2.0 is now supported with the GNU runtime.</li>
<li>Many many bugs are fixed and many features have been added.</li>
</ul>
</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="clangsa">Clang Static Analyzer</a>
</div>

<div class="doc_text">

<p><b>UPDATE!</b> Previously announced in the 2.4 and 2.5 LLVM releases, the Clang project also
includes an early stage static source code analysis tool for <a
href="http://clang.llvm.org/StaticAnalysis.html">automatically finding bugs</a>
in C and Objective-C programs. The tool performs a growing set of checks to find
bugs that occur on a specific path within a program.</p>

<p>In the LLVM 2.6 time-frame there have been many significant improvements to
XYZ.</p>

<p>The set of checks performed by the static analyzer continues to expand, and
future plans for the tool include full source-level inter-procedural analysis
and deeper checks such as buffer overrun detection. There are many opportunities
to extend and enhance the static analyzer, and anyone interested in working on
this project is encouraged to get involved!</p>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="vmkit">VMKit: JVM/CLI Virtual Machine Implementation</a>
</div>

<div class="doc_text">
<p>
<b>UPDATE!</b> 
The <a href="http://vmkit.llvm.org/">VMKit project</a> is an implementation of
a JVM and a CLI Virtual Machines (Microsoft .NET is an
implementation of the CLI) using the Just-In-Time compiler of LLVM.</p>

<p>Following LLVM 2.6, VMKit has its XYZ release that you can find on its
<a href="http://vmkit.llvm.org/releases/">webpage</a>. The release includes
bug fixes, cleanup and new features. The major changes are:</p>

<ul>

<li>Something wonderful!</li>

</ul>
</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="mc">llvm-mc: Machine Code Toolkit</a>
</div>

<div class="doc_text">
<p>
<b>UPDATE!</b> 
blah

  MC:
    MCSection, MCAsmInfo
	MCInstPrinter did it make it in?
	MCInst (X86 using it so far)
	Rewrite of X86 GV selection logic: TargetOperand flags on ExternalSymbol, GV, etc operands.
	Can parse and re-print out an darwin-x86 .s file.
	TargetLoweringObjectFile, MCSectionKind
	Verrrry early start of a macho writer.
</p>

</div>	


<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="externalproj">External Projects Using LLVM 2.6</a>
</div>
<!-- *********************************************************************** -->

<!--=========================================================================-->
<div class="doc_subsection">
<a name="Rubinius">Rubinius</a>
</div>

<div class="doc_text">
<p><a href="http://github.com/evanphx/rubinius">Rubinius</a> is an environment
for running Ruby code which strives to write as much of the core class
implementation in Ruby as possible. Combined with a bytecode interpreting VM, it
uses LLVM to optimize and compile ruby code down to machine code. Techniques
such as type feedback, method inlining, and uncommon traps are all used to
remove dynamism from ruby execution and increase performance.</p>

<p>Since LLVM 2.5, Rubinius has made several major leaps forward, implementing
a counter based JIT, type feedback, and speculative method inlining.
</p>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="macruby">MacRuby</a>
</div>

<div class="doc_text">

<p>
<a href="http://macruby.org">MacRuby</a> is an implementation of Ruby on top of
core Mac OS X technologies, such as the Objective-C common runtime and garbage
collector, and the CoreFoundation framework. It is principally developed by
Apple and aims at enabling the creation of full-fledged Mac OS X applications.
</p>

<p>
MacRuby uses LLVM for optimization passes, JIT and AOT compilation of Ruby
expressions. It also uses zero-cost DWARF exceptions to implement Ruby exception
handling.</p>

</div>


<!--=========================================================================-->
<div class="doc_subsection">
<a name="pure">Pure</a>
</div>

<div class="doc_text">
<p>
<a href="http://pure-lang.googlecode.com/">Pure</a>
is an algebraic/functional programming language based on term rewriting.
Programs are collections of equations which are used to evaluate expressions in
a symbolic fashion. Pure offers dynamic typing, eager and lazy evaluation,
lexical closures, a hygienic macro system (also based on term rewriting),
built-in list and matrix support (including list and matrix comprehensions) and
an easy-to-use C interface. The interpreter uses LLVM as a backend to
 JIT-compile Pure programs to fast native code.</p>

<p>Pure versions 0.31 and later have been tested and are known to work with
LLVM 2.6 (and continue to work with older LLVM releases >= 2.3 as well).
</p>
</div>


<!--=========================================================================-->
<div class="doc_subsection">
<a name="ldc">LLVM D Compiler</a>
</div>

<div class="doc_text">
<p>
<b>UPDATE!</b> 
<a href="http://www.dsource.org/projects/ldc">LDC</a> is an implementation of
the D Programming Language using the LLVM optimizer and code generator.
The LDC project works great with the LLVM 2.6 release.  General improvements in
this
cycle have included new inline asm constraint handling, better debug info
support, general bugfixes, and better x86-64 support.  This has allowed
some major improvements in LDC, getting us much closer to being as
fully featured as the original DMD compiler from DigitalMars.
</p>
</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="RoadsendPHP">Roadsend PHP</a>
</div>

<div class="doc_text">
<p>
<a href="http://code.roadsend.com/rphp">Roadsend PHP</a> (rphp) is an open
source implementation of the PHP programming 
language that uses LLVM for its optimizer, JIT, and static compiler. This is a 
reimplementation of an earlier project that is now based on LLVM.</p>
</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="Unladen Swallow">Unladen Swallow</a>
</div>

<div class="doc_text">
<p>
<b>UPDATE!</b> 
<a href="http://code.google.com/p/unladen-swallow/">Unladen Swallow</a> is a
branch of <a href="http://python.org/">Python</a> intended to be fully
compatible and significantly faster.  It uses LLVM's optimization passes and JIT
compiler.</p>
</div>



<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="whatsnew">What's New in LLVM 2.6?</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">

<p>This release includes a huge number of bug fixes, performance tweaks, and
minor improvements.  Some of the major improvements and new features are listed
in this section.
</p>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="majorfeatures">Major New Features</a>
</div>

<div class="doc_text">

<p>LLVM 2.6 includes several major new capabilities:</p>

<ul>
<li>Support for debug line numbers when optimization enabled</li>
<li>gold lto plugin</li>
<li>New MSP430 and SystemZ backends.</li>
<li>New BlackFin backend.</li>
<li>LLVMContext,   llvm_start_multithreaded: ProgrammersManual.html#threading</li>
<li>klee web page at klee.llvm.org</li>
<li>FileCheck</li>
<li>New compiler-rt project.</li>
<li>LLVM 2.6 includes a brand new experimental LLVM bindings to the Ada2005 programming language.</li>
</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="coreimprovements">LLVM IR and Core Improvements</a>
</div>

<div class="doc_text">
<p>LLVM IR has several new features that are used by our existing front-ends and
can be useful if you are writing a front-end for LLVM:</p>

<ul>
<li>Getelementpr instruction now allows any integer type for array/pointer indexes.</li>
<li>Inbounds for GEP</li>
<li>NSW/NUW/exact div</li>
<li>LSR promotes int induction variables to 64-bit on 64-bit targets, major perf boost for numerical code.</li>
<li>LSR now analyzes pointer expressions (e.g. getelementptrs), not just integers.</li>
<li>new linkage types linkonce_odr, weak_odr, linker_private, and available_externally.</li>
<li>New fadd, fsub, fmul instructions and classes. </li>
<li>Target intrinsics can now return multiple results.</li>
</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="optimizer">Optimizer Improvements</a>
</div>

<div class="doc_text">

<p>In addition to a large array of bug fixes and minor performance tweaks, this
release includes a few major enhancements and additions to the optimizers:</p>

<ul>

<li>SRoA improvements for vector unions, memset, arbitrary weird bitfield accesses etc.  It now produces "strange" sized integers.</li>
<li>Inliner reuse stack space when inlining arrays?</li>
<li>Enabled GVN Load PRE.</li>
<li>New Static Single Information (SSI) construction pass (not used by anything yet, experimental).</li>
</li>

</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="codegen">Target Independent Code Generator Improvements</a>
</div>

<div class="doc_text">

<p>We have put a significant amount of work into the code generator
infrastructure, which allows us to implement more aggressive algorithms and make
it run faster:</p>

<ul>

<li>    -asm-verbose now prints location info (with -g) and loop nest info.</li>
<li>Tblgen now supports multiclass inheritance and a number of new string and
    list operations like !(subst), !(foreach), !car, !cdr, !null, !if, !cast.
    These make the .td files more expressive and allow more aggressive factoring
    of duplication across instruction patterns.</li>
<li>New MachineVerifier pass.</li>
<li>Machine LICM, hoists things like constant pool loads, loads from readonly stubs, vector constant synthesization code, etc.</li>
<li>Machine Sinking</li>
<li>target-specific intrinsics (r63765)</li>
<li>Regalloc improvements for commuting, various spiller peephole optimizations, cross-class coalescing.</li>
<li><tt>llc -enable-value-prop</tt>, propagation of value info (sign/zero ext info) from one MBB to another</li>
<li>Regalloc hints for allocation stuff: Evan r73381/r73671.  Finished/enabled?</li>
<li>Stack slot coloring for register spills (denser stack frames)</li>
<li>SelectionDAGS: New BuildVectorSDNode (r65296), and ISD::VECTOR_SHUFFLE (r69952 / PR2957)</li>
<li>Experimental support for shrink wrapping support in PEI.</li>
</ul>
</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="x86">X86-32 and X86-64 Target Improvements</a>
</div>

<div class="doc_text">
<p>New features of the X86 target include:
</p>

<ul>

<li>Preliminary support for addrspace 256 -> GS, 257 -> FS, known problems: CodeGenerator.html#x86_memory</li>
<li>Support for softfloat modes, typically used by OS kernels.</li>

<li>X86-64: better modeling of implicit zero extensions, eliminates a lot of redundant zexts</li>
<li>X86-64 TLS support for local exec and initial exec.</li>
<li>Better modeling of H registerts as subregs.</li>
<li>Vector icmp/fcmp now work with SSE codegen.</li>
<li>SSE 4.2 support.</li>
<li>all global variable reference logic is now in ClassifyGlobalReference.</li>
</li>
</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="pic16">PIC16 Target Improvements</a>
</div>

<div class="doc_text">
<p>New features of the PIC16 target include:
</p>

<ul>
<li>Support for floating-point, indirect function calls, and
    passing/returning aggregate types to functions.
<li>The code generator is able to generate debug info into output COFF files.
<li>Support for placing an object into a specific section or at a specific
    address in memory.</li>
</ul>

<p>Things not yet supported:</p>

<ul>
<li>Variable arguments.</li>
<li>Interrupts/programs.</li>
</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="ARM">ARM Target Improvements</a>
</div>

<div class="doc_text">
<p>New features of the ARM target include:
</p>

<ul>

<li>Preliminary support for processors, such as the Cortex-A8 and Cortex-A9,
that implement version v7-A of the ARM architecture.  The ARM backend now
supports both the Thumb2 and Advanced SIMD (Neon) instruction sets. The
AAPCS-VFP "hard float" calling conventions are also supported with the
<tt>-float-abi=hard</tt> flag. These features are still somewhat experimental
and subject to change. The Neon intrinsics, in particular, may change in future
releases of LLVM.
</li>

  ARM AAPCS-VFP hard float ABI is supported. 
  ARM calling convention code is now tblgen generated instead of manual.
  ARM: NEON support. neonfp for doing single precision fp with neon instead of VFP.

</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="OtherTarget">Other Target Specific Improvements</a>
</div>

<div class="doc_text">
<p>New features of other targets include:
</p>

<ul>
<li>Add support for the PowerPC 64-bit SVR4 ABI.</li>
<li>Mips now supports O32 Calling Convention.</li>
</ul>

</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="newapis">New Useful APIs</a>
</div>

<div class="doc_text">

<ul>
<li>New EngineBuilder class for creating JITs: r76276</li>
  New PrettyStackTrace, crashes of llvm tools should give some indication of what the compiler was doing at the time of the crash (e.g. running a pass), and print out command line arguments.
  StringRef class, Twine class.
    New WeakVH and AssertingVH and CallbackVH classes.
  New llvm/ADT/Triple class.
 llvm_report_error() error handling API (llvm/Support/ErrorHandling.h)
  New llvm/System/Atomic.h, llvm/System/RWMutex.h for portable atomic ops, rw locks.
  New SourceMgr, SMLoc classes for simple parsers with caret diagnostics and #include support, (used by
    tablegen, llvm-mc, the .ll parser, FileCheck, etc)

<ul>


</div>

<!--=========================================================================-->
<div class="doc_subsection">
<a name="otherimprovements">Other Improvements and New Features</a>
</div>

<div class="doc_text">
<p>Other miscellaneous features include:</p>

<ul>
<li>interpreter + libffi</li>
<li>  JIT now supports generating more than 16M of code.</li>
<li>Users can now <a
href="http://llvm.org/doxygen/classllvm_1_1ExecutionEngine.html#fcd2b4b92ca38812ca31640b0da14927">register</a>
a <a href="http://llvm.org/doxygen/classllvm_1_1JITEventListener.html">JITEventListener</a>
to receive callbacks when the JIT emits or frees machine code. The
OProfile support uses this mechanism.</li>
   JIT support for oprofile (r75279), configure with --with-oprofile.  Now we get line # and function info for JIT'd functions.

<li>Profile info improvements by Andreas Neustifter.</li>
<li>Many extensions to the C APIs.</li>

<li>LLVMC:

* Dynamic plugins now work on Windows.
* New option property: init. Makes possible to provide default values for
 options defined in plugins (interface to cl::init).
* New example: Skeleton, shows how to create a standalone LLVMC-based driver.
* New example: mcc16, a driver for the PIC16 toolchain.</li>

</ul>

</div>


<!--=========================================================================-->
<div class="doc_subsection">
<a name="changes">Major Changes and Removed Features</a>
</div>

<div class="doc_text">

<p>If you're already an LLVM user or developer with out-of-tree changes based
on LLVM 2.5, this section lists some "gotchas" that you may run into upgrading
from the previous release.</p>

<ul>

<li>The Itanium (IA64) backend has been removed.  It was not supported and
    bitrotted.</li>
<li>The BigBlock register allocator has been removed, it also bitrotted.</li>
<li>The C Backend (-march=c) is no longer considered part of the LLVM release
criteria.  We still want it to work, but no one is maintaining it and it lacks
support for arbitrary precision integers and other important IR features.</li>
</ul>

  LLVM build now builds all libraries as .a files instead of some
  libraries as relinked .o files.  This requires some APIs like
  InitializeAllTargets.h.  TargetRegistry! 




<p>In addition, many APIs have changed in this release.  Some of the major LLVM
API changes are:</p>


  API Cleanup:
    no use of hash_set/hash_map, no more llvm::OStream
    Use raw_ostream for everything, killed off llvm/Streams.h and DOUT

<ul>
<li>LLVM's global uniquing tables for <tt>Type</tt>s and <tt>Constant</tt>s have
    been privatized into members of an <tt>LLVMContext</tt>.  A number of APIs
    now take an <tt>LLVMContext</tt> as a parameter.  To smooth the transition
    for clients that will only ever use a single context, the new 
    <tt>getGlobalContext()</tt> API can be used to access a default global 
    context which can be passed in any and all cases where a context is 
    required.
<li>The <tt>getABITypeSize</tt> methods are now called <tt>getAllocSize</tt>.</li>
<li>The <tt>Add</tt>, <tt>Sub</tt>, and <tt>Mul</tt> operators are no longer
    overloaded for floating-point types. Floating-point addition, subtraction,
    and multiplication are now represented with new operators <tt>FAdd</tt>,
    <tt>FSub</tt>, and <tt>FMul</tt>. In the <tt>IRBuilder</tt> API,
    <tt>CreateAdd</tt>, <tt>CreateSub</tt>, <tt>CreateMul</tt>, and
    <tt>CreateNeg</tt> should only be used for integer arithmetic now;
    <tt>CreateFAdd</tt>, <tt>CreateFSub</tt>, <tt>CreateFMul</tt>, and
    <tt>CreateFNeg</tt> should now be used for floating-point arithmetic.</li>
<li>The DynamicLibrary class can no longer be constructed, its functionality has
    moved to static member functions.</li>
<li><tt>raw_fd_ostream</tt>'s constructor for opening a given filename now
    takes an extra <tt>Force</tt> argument. If <tt>Force</tt> is set to
    <tt>false</tt>, an error will be reported if a file with the given name
    already exists. If <tt>Force</tt> is set to <tt>true</tt>, the file will
    be silently truncated (which is the behavior before this flag was
    added).</li>
<li><tt>SCEVHandle</tt> no longer exists, because reference counting is no
longer done for <tt>SCEV*</tt> objects, instead <tt>const SCEV*</tt> should be
used.</li>

<li>Many APIs, notably <tt>llvm::Value</tt>, now use the <tt>StringRef</tt>
and <tt>Twine</tt> classes instead of passing <tt>const char*</tt>
or <tt>std::string</tt>, as described in
the <a href="ProgrammersManual.html#string_apis">Programmer's Manual</a>. Most
clients should be unaffected by this transition, unless they are used to <tt>Value::getName()</tt> returning a string. Here are some tips on updating to 2.6:
  <ul>
    <li><tt>getNameStr()</tt> is still available, and matches the old
      behavior. Replacing <tt>getName()</tt> calls with this is an safe option,
      although more efficient alternatives are now possible.</li>

    <li>If you were just relying on <tt>getName()</tt> being able to be sent to
      a <tt>std::ostream</tt>, consider migrating
      to <tt>llvm::raw_ostream</tt>.</li>
      
    <li>If you were using <tt>getName().c_str()</tt> to get a <tt>const
        char*</tt> pointer to the name, you can use <tt>getName().data()</tt>.
        Note that this string (as before), may not be the entire name if the
        name containts embedded null characters.</li>

    <li>If you were using operator plus on the result of <tt>getName()</tt> and
      treating the result as an <tt>std::string</tt>, you can either
      uses <tt>Twine::str</tt> to get the result as an <tt>std::string</tt>, or
      could move to a <tt>Twine</tt> based design.</li>

    <li><tt>isName()</tt> should be replaced with comparison
      against <tt>getName()</tt> (this is now efficient).
  </ul>
</li>

<li>The registration interfaces for backend Targets has changed (what was
previously TargetMachineRegistry). For backend authors, see the <a href="WritingAnLLVMBackend.html#TargetRegistration">Writing An LLVM Backend</a> guide. For clients, the notable API changes are:
  <ul>
    <li><tt>TargetMachineRegistry</tt> has been renamed
      to <tt>TargetRegistry</tt>.</li>

    <li>Clients should move to using the <tt>TargetRegistry::lookupTarget()</tt>
      function to find targets.</li>
  </ul>
</li>

<li>llvm-dis now fails if output file exists, instead of dumping to stdout.
FIXME: describe any other tool changes due to the raw_fd_ostream change.  FIXME:
This is not an API change, maybe there should be a tool changes section?</li>
<li>temporarely due to Context API change passes should call doInitialization()
method of the pass they inherit from, otherwise Context is NULL.
FIXME: remove this entry when this is no longer needed.<li>
</ul>

</div>



<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="portability">Portability and Supported Platforms</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">

<p>LLVM is known to work on the following platforms:</p>

<ul>
<li>Intel and AMD machines (IA32, X86-64, AMD64, EMT-64) running Red Hat
Linux, Fedora Core, FreeBSD and AuroraUX (and probably other unix-like systems).</li>
<li>PowerPC and X86-based Mac OS X systems, running 10.3 and above in 32-bit
and 64-bit modes.</li>
<li>Intel and AMD machines running on Win32 using MinGW libraries (native).</li>
<li>Intel and AMD machines running on Win32 with the Cygwin libraries (limited
    support is available for native builds with Visual C++).</li>
<li>Sun UltraSPARC workstations running Solaris 10.</li>
<li>Alpha-based machines running Debian GNU/Linux.</li>
</ul>

<p>The core LLVM infrastructure uses GNU autoconf to adapt itself
to the machine and operating system on which it is built.  However, minor
porting may be required to get LLVM to work on new platforms.  We welcome your
portability patches and reports of successful builds or error messages.</p>

</div>

<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="knownproblems">Known Problems</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">

<p>This section contains significant known problems with the LLVM system,
listed by component.  If you run into a problem, please check the <a
href="http://llvm.org/bugs/">LLVM bug database</a> and submit a bug if
there isn't already one.</p>

<ul>
<li>LLVM will not correctly compile on Solaris and/or OpenSolaris
using the stock GCC 3.x.x series 'out the box',
See: <a href="#brokengcc">Broken versions of GCC and other tools</a>.
However, A <a href="http://pkg.auroraux.org/GCC">Modern GCC Build</a>
for x86/x64 has been made available from the third party AuroraUX Project
that has been meticulously tested for bootstrapping LLVM &amp; Clang.</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="experimental">Experimental features included with this release</a>
</div>

<div class="doc_text">

<p>The following components of this LLVM release are either untested, known to
be broken or unreliable, or are in early development.  These components should
not be relied on, and bugs should not be filed against them, but they may be
useful to some people.  In particular, if you would like to work on one of these
components, please contact us on the <a
href="http://lists.cs.uiuc.edu/mailman/listinfo/llvmdev">LLVMdev list</a>.</p>

<ul>
<li>The MSIL, Alpha, SPU, MIPS, and PIC16 backends are experimental.</li>
<li>The <tt>llc</tt> "<tt>-filetype=asm</tt>" (the default) is the only
    supported value for this option.</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="x86-be">Known problems with the X86 back-end</a>
</div>

<div class="doc_text">

<ul>
  <li>The X86 backend does not yet support
    all <a href="http://llvm.org/PR879">inline assembly that uses the X86
    floating point stack</a>.  It supports the 'f' and 't' constraints, but not
    'u'.</li>
  <li>The X86 backend generates inefficient floating point code when configured
    to generate code for systems that don't have SSE2.</li>
  <li>Win64 code generation wasn't widely tested. Everything should work, but we
    expect small issues to happen. Also, llvm-gcc cannot build the mingw64
    runtime currently due
    to <a href="http://llvm.org/PR2255">several</a>
    <a href="http://llvm.org/PR2257">bugs</a> and due to lack of support for
    the
    'u' inline assembly constraint and for X87 floating point inline assembly.</li>
  <li>The X86-64 backend does not yet support the LLVM IR instruction
      <tt>va_arg</tt>. Currently, the llvm-gcc and front-ends support variadic
      argument constructs on X86-64 by lowering them manually.</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="ppc-be">Known problems with the PowerPC back-end</a>
</div>

<div class="doc_text">

<ul>
<li>The Linux PPC32/ABI support needs testing for the interpreter and static
compilation, and lacks support for debug information.</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="arm-be">Known problems with the ARM back-end</a>
</div>

<div class="doc_text">

<ul>
<li>Support for the Advanced SIMD (Neon) instruction set is still incomplete
and not well tested.  Some features may not work at all, and the code quality
may be poor in some cases.</li>
<li>Thumb mode works only on ARMv6 or higher processors. On sub-ARMv6
processors, thumb programs can crash or produce wrong
results (<a href="http://llvm.org/PR1388">PR1388</a>).</li>
<li>Compilation for ARM Linux OABI (old ABI) is supported but not fully tested.
</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="sparc-be">Known problems with the SPARC back-end</a>
</div>

<div class="doc_text">

<ul>
<li>The SPARC backend only supports the 32-bit SPARC ABI (-m32); it does not
    support the 64-bit SPARC ABI (-m64).</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="mips-be">Known problems with the MIPS back-end</a>
</div>

<div class="doc_text">

<ul>
<li>The O32 ABI is not fully supported.</li>
<li>64-bit MIPS targets are not supported yet.</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="alpha-be">Known problems with the Alpha back-end</a>
</div>

<div class="doc_text">

<ul>

<li>On 21164s, some rare FP arithmetic sequences which may trap do not have the
appropriate nops inserted to ensure restartability.</li>

</ul>
</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="c-be">Known problems with the C back-end</a>
</div>

<div class="doc_text">

<ul>
<li><a href="http://llvm.org/PR802">The C backend has only basic support for
    inline assembly code</a>.</li>
<li><a href="http://llvm.org/PR1658">The C backend violates the ABI of common
    C++ programs</a>, preventing intermixing between C++ compiled by the CBE and
    C++ code compiled with <tt>llc</tt> or native compilers.</li>
<li>The C backend does not support all exception handling constructs.</li>
<li>The C backend does not support arbitrary precision integers.</li>
</ul>

</div>


<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="c-fe">Known problems with the llvm-gcc C front-end</a>
</div>

<div class="doc_text">

<p>llvm-gcc does not currently support <a href="http://llvm.org/PR869">Link-Time
Optimization</a> on most platforms "out-of-the-box".  Please inquire on the
LLVMdev mailing list if you are interested.</p>

<p>The only major language feature of GCC not supported by llvm-gcc is
    the <tt>__builtin_apply</tt> family of builtins.   However, some extensions
    are only supported on some targets.  For example, trampolines are only
    supported on some targets (these are used when you take the address of a
    nested function).</p>

<p>If you run into GCC extensions which are not supported, please let us know.
</p>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="c++-fe">Known problems with the llvm-gcc C++ front-end</a>
</div>

<div class="doc_text">

<p>The C++ front-end is considered to be fully
tested and works for a number of non-trivial programs, including LLVM
itself, Qt, Mozilla, etc.</p>

<ul>
<li>Exception handling works well on the X86 and PowerPC targets. Currently
  only Linux and Darwin targets are supported (both 32 and 64 bit).</li>
</ul>

</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="fortran-fe">Known problems with the llvm-gcc Fortran front-end</a>
</div>

<div class="doc_text">
<ul>
<li>Fortran support generally works, but there are still several unresolved bugs
    in Bugzilla.  Please see the tools/gfortran component for details.</li>
</ul>
</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
  <a name="ada-fe">Known problems with the llvm-gcc Ada front-end</a>
</div>

<div class="doc_text">
The llvm-gcc 4.2 Ada compiler works fairly well; however, this is not a mature
technology, and problems should be expected.
<ul>
<li>The Ada front-end currently only builds on X86-32.  This is mainly due
to lack of trampoline support (pointers to nested functions) on other platforms.
However, it <a href="http://llvm.org/PR2006">also fails to build on X86-64</a>
which does support trampolines.</li>
<li>The Ada front-end <a href="http://llvm.org/PR2007">fails to bootstrap</a>.
This is due to lack of LLVM support for <tt>setjmp</tt>/<tt>longjmp</tt> style
exception handling, which is used internally by the compiler.
Workaround: configure with --disable-bootstrap.</li>
<li>The c380004, <a href="http://llvm.org/PR2010">c393010</a>
and <a href="http://llvm.org/PR2421">cxg2021</a> ACATS tests fail
(c380004 also fails with gcc-4.2 mainline).
If the compiler is built with checks disabled then <a href="http://llvm.org/PR2010">c393010</a>
causes the compiler to go into an infinite loop, using up all system memory.</li>
<li>Some GCC specific Ada tests continue to crash the compiler.</li>
<li>The -E binder option (exception backtraces)
<a href="http://llvm.org/PR1982">does not work</a> and will result in programs
crashing if an exception is raised.  Workaround: do not use -E.</li>
<li>Only discrete types <a href="http://llvm.org/PR1981">are allowed to start
or finish at a non-byte offset</a> in a record.  Workaround: do not pack records
or use representation clauses that result in a field of a non-discrete type
starting or finishing in the middle of a byte.</li>
<li>The <tt>lli</tt> interpreter <a href="http://llvm.org/PR2009">considers
'main' as generated by the Ada binder to be invalid</a>.
Workaround: hand edit the file to use pointers for <tt>argv</tt> and
<tt>envp</tt> rather than integers.</li>
<li>The <tt>-fstack-check</tt> option <a href="http://llvm.org/PR2008">is
ignored</a>.</li>
</ul>
</div>

<!-- ======================================================================= -->
<div class="doc_subsection">
	<a name="ocaml-bindingse">Known problems with the O'Caml bindings</a>
</div>

<div class="doc_text">

<p>The Llvm.Linkage module is broken, and has incorrect values. Only
Llvm.Linkage.External, Llvm.Linkage.Available_externally, and
Llvm.Linkage.Link_once will be correct. If you need any of the other linkage
modes, you'll have to write an external C library in order to expose the
functionality. This has been fixed in the trunk.</p>
</div>

<!-- *********************************************************************** -->
<div class="doc_section">
  <a name="additionalinfo">Additional Information</a>
</div>
<!-- *********************************************************************** -->

<div class="doc_text">

<p>A wide variety of additional information is available on the <a
href="http://llvm.org">LLVM web page</a>, in particular in the <a
href="http://llvm.org/docs/">documentation</a> section.  The web page also
contains versions of the API documentation which is up-to-date with the
Subversion version of the source code.
You can access versions of these documents specific to this release by going
into the "<tt>llvm/doc/</tt>" directory in the LLVM tree.</p>

<p>If you have any questions or comments about LLVM, please feel free to contact
us via the <a href="http://llvm.org/docs/#maillist"> mailing
lists</a>.</p>

</div>

<!-- *********************************************************************** -->

<hr>
<address>
  <a href="http://jigsaw.w3.org/css-validator/check/referer"><img
  src="http://jigsaw.w3.org/css-validator/images/vcss-blue" alt="Valid CSS"></a>
  <a href="http://validator.w3.org/check/referer"><img
  src="http://www.w3.org/Icons/valid-html401-blue" alt="Valid HTML 4.01"></a>

  <a href="http://llvm.org/">LLVM Compiler Infrastructure</a><br>
  Last modified: $Date$
</address>

</body>
</html>
