; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

declare void @bcopy(i8* nocapture readonly, i8* nocapture, i32)

define void @bcopy_memmove(i8* nocapture readonly %a, i8* nocapture %b) {
; CHECK-LABEL: @bcopy_memmove(
; CHECK-NEXT:    [[TMP1:%.*]] = bitcast i8* [[A:%.*]] to i64*
; CHECK-NEXT:    [[TMP2:%.*]] = bitcast i8* [[B:%.*]] to i64*
; CHECK-NEXT:    [[TMP3:%.*]] = load i64, i64* [[TMP1]], align 1
; CHECK-NEXT:    store i64 [[TMP3]], i64* [[TMP2]], align 1
; CHECK-NEXT:    ret void
;
  tail call void @bcopy(i8* %a, i8* %b, i32 8)
  ret void
}

define void @bcopy_memmove2(i8* nocapture readonly %a, i8* nocapture %b, i32 %len) {
; CHECK-LABEL: @bcopy_memmove2(
; CHECK-NEXT:    call void @llvm.memmove.p0i8.p0i8.i32(i8* align 1 [[B:%.*]], i8* align 1 [[A:%.*]], i32 [[LEN:%.*]], i1 false)
; CHECK-NEXT:    ret void
;
  tail call void @bcopy(i8* %a, i8* %b, i32 %len)
  ret void
}
