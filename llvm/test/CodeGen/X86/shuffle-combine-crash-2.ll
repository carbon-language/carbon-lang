; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=i686-unknown -mattr=+sse2 | FileCheck %s --check-prefix=X86
; RUN: llc < %s -mtriple=x86_64-unknown -mattr=+sse2 | FileCheck %s --check-prefix=X64

define <4 x i64> @fold_movsd_zero() {
; X86-LABEL: fold_movsd_zero:
; X86:       # BB#0:
; X86-NEXT:    xorps %xmm0, %xmm0
; X86-NEXT:    xorps %xmm1, %xmm1
; X86-NEXT:    retl
;
; X64-LABEL: fold_movsd_zero:
; X64:       # BB#0:
; X64-NEXT:    xorps %xmm0, %xmm0
; X64-NEXT:    xorps %xmm1, %xmm1
; X64-NEXT:    retq
  %insert = insertelement <4 x i64> zeroinitializer, i64 0, i32 0
  %shuffle = shufflevector <4 x i64> %insert, <4 x i64> zeroinitializer, <4 x i32> <i32 3, i32 5, i32 7, i32 1>
  ret <4 x i64> %shuffle
}
