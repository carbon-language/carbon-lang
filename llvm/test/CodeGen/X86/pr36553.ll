; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=x86_64-apple-darwin10 | FileCheck %s

; Make sure we don't crash because we negated an fma when we didn't have any fma instructions.

define float @pr36553(float %a, float %b, float %c) nounwind {
; CHECK-LABEL: pr36553:
; CHECK:       ## %bb.0: ## %entry
; CHECK-NEXT:    pushq %rax
; CHECK-NEXT:    callq _fmaf
; CHECK-NEXT:    xorps {{.*}}(%rip), %xmm0
; CHECK-NEXT:    popq %rax
; CHECK-NEXT:    retq
entry:
  %0 = tail call float @llvm.fma.f32(float %a, float %b, float %c)
  %sub = fsub float -0.000000e+00, %0
  ret float %sub
}

declare float @llvm.fma.f32(float, float, float)
