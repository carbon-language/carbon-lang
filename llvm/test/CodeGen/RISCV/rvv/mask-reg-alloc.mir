# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -march=riscv64 -mattr=+experimental-v -verify-machineinstrs \
# RUN:     -start-after finalize-isel -stop-after prologepilog -o - %s | FileCheck %s

--- |
  define void @mask_reg_alloc() {
    ret void
  }
...
---
name: mask_reg_alloc
tracksRegLiveness: true
body:             |
  bb.0 (%ir-block.0):
    liveins: $v0, $v1, $v2, $v3
    ; CHECK-LABEL: name: mask_reg_alloc
    ; CHECK: liveins: $v0, $v1, $v2, $v3
    ; CHECK: dead $x0 = PseudoVSETIVLI 1, 64, implicit-def $vl, implicit-def $vtype
    ; CHECK: renamable $v25 = PseudoVMERGE_VIM_M1 killed renamable $v2, 1, killed renamable $v0, 1, 3, implicit $vl, implicit $vtype
    ; CHECK: renamable $v0 = COPY killed renamable $v1
    ; CHECK: renamable $v26 = PseudoVMERGE_VIM_M1 killed renamable $v3, 1, killed renamable $v0, 1, 3, implicit $vl, implicit $vtype
    ; CHECK: renamable $v0 = PseudoVADD_VV_M1 killed renamable $v25, killed renamable $v26, 1, 3, implicit $vl, implicit $vtype
    ; CHECK: PseudoRET implicit $v0
    %0:vr = COPY $v0
    %1:vr = COPY $v1
    %2:vr = COPY $v2
    %3:vr = COPY $v3
    %4:vmv0 = COPY %0
    %5:vrnov0 = PseudoVMERGE_VIM_M1 killed %2, 1, %4, 1, 3
    %6:vmv0 = COPY %1
    %7:vrnov0 = PseudoVMERGE_VIM_M1 killed %3, 1, %6, 1, 3
    %8:vr = PseudoVADD_VV_M1 killed %5, killed %7, 1, 3
    $v0 = COPY %8
    PseudoRET implicit $v0
...
