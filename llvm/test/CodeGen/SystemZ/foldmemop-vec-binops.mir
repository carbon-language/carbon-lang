# RUN: llc -mtriple=s390x-linux-gnu -mcpu=z14 -start-before=greedy %s -o - \
# RUN:   | FileCheck %s
#
# Test folding of a memory operand into an fp memory instruction.

--- |
  define void @fun0(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun1(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun2(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun3(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun4(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun5(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun6(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun7(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun8(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun9(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun10(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun11(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun12(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun13(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun14(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun15(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun16(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun17(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun18(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun19(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun20(double %arg0, double %arg1, double* %Dst) { ret void }
  define void @fun21(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun22(float %arg0, float %arg1, float* %Dst) { ret void }
  define void @fun23(float %arg0, float %arg1, float* %Dst) { ret void }

...

# Test with both orders of operands since some operations are commutative.

# CHECK-LABEL: fun0:
# CHECK: adb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun0
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFADB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun1:
# CHECK: adb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun1
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFADB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...

# ADB can't be used if one operand is a VR64 (and not FP64).
# CHECK-LABEL: fun2:
# CHECK: wfadb   %f0, %v16, %f0
---
name:            fun2
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: vr64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFADB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun3:
# CHECK: aeb     %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun3
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFASB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun4:
# CHECK: aeb     %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun4
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFASB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# AEB can't be used if one operand is a VR64 (and not FP64).
# CHECK-LABEL: fun5:
# CHECK: wfasb   %f0, %v16, %f0
---
name:            fun5
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: vr32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFASB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun6:
# CHECK: sdb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun6
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFSDB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun7:
# CHECK: wfsdb   %f0, %f1, %f0
---
name:            fun7
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFSDB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...

# SDB can't be used if one operand is a VR64 (and not FP64).
# CHECK-LABEL: fun8:
# CHECK: wfsdb   %f0, %f0, %v16
---
name:            fun8
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: vr64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFSDB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun9:
# CHECK: seb     %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun9
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFSSB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun10:
# CHECK: wfssb   %f0, %f1, %f0
---
name:            fun10
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFSSB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# SEB can't be used if one operand is a VR32 (and not FP32).
# CHECK-LABEL: fun11:
# CHECK: wfssb   %f0, %f0, %v16
---
name:            fun11
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: vr32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFSSB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...

# CHECK-LABEL: fun12:
# CHECK: ddb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun12
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFDDB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun13:
# CHECK: wfddb   %f0, %f1, %f0
---
name:            fun13
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFDDB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...

# DDB can't be used if one operand is a VR64 (and not FP64).
# CHECK-LABEL: fun14:
# CHECK: wfddb   %f0, %f0, %v16
---
name:            fun14
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: vr64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFDDB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun15:
# CHECK: deb     %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun15
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFDSB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun16:
# CHECK: wfdsb   %f0, %f1, %f0
---
name:            fun16
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFDSB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# DEB can't be used if one operand is a VR32 (and not FP32).
# CHECK-LABEL: fun17:
# CHECK: wfdsb   %f0, %f0, %v16
---
name:            fun17
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: vr32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFDSB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun18:
# CHECK: mdb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun18
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFMDB %0, %1, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun19:
# CHECK: mdb     %f0, 160(%r15)                  # 8-byte Folded Reload
---
name:            fun19
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: fp64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFMDB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...

# MDB can't be used if one operand is a VR64 (and not FP64).
# CHECK-LABEL: fun20:
# CHECK: wfmdb   %f0, %v16, %f0
---
name:            fun20
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp64bit }
  - { id: 1, class: vr64bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr64bit }
liveins:
  - { reg: '$f0d', virtual-reg: '%0' }
  - { reg: '$f2d', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0d, $f2d, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr64bit = COPY $f2d
    %0:fp64bit = COPY $f0d
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr64bit = nofpexcept WFMDB %1, %0, implicit $fpc
    VST64 %3, %2, 0, $noreg :: (store 8 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun21:
# CHECK: meeb    %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun21
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFMSB %0, %1, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# CHECK-LABEL: fun22:
# CHECK: meeb    %f0, 164(%r15)                  # 4-byte Folded Reload
---
name:            fun22
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: fp32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:fp32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFMSB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...


# MEEB can't be used if one operand is a VR32 (and not FP32).
# CHECK-LABEL: fun23:
# CHECK: wfmsb   %f0, %v16, %f0
---
name:            fun23
alignment:       16
tracksRegLiveness: true
registers:
  - { id: 0, class: fp32bit }
  - { id: 1, class: vr32bit }
  - { id: 2, class: addr64bit }
  - { id: 3, class: vr32bit }
liveins:
  - { reg: '$f0s', virtual-reg: '%0' }
  - { reg: '$f2s', virtual-reg: '%1' }
  - { reg: '$r2d', virtual-reg: '%2' }
frameInfo:
  maxAlignment:    1
machineFunctionInfo: {}
body:             |
  bb.0:
    liveins: $f0s, $f2s, $r2d
  
    %2:addr64bit = COPY $r2d
    %1:vr32bit = COPY $f2s
    %0:fp32bit = COPY $f0s
    INLINEASM &"", 1, 12, implicit-def dead early-clobber $r0d, 12, implicit-def dead early-clobber $r1d, 12, implicit-def dead early-clobber $r2d, 12, implicit-def dead early-clobber $r3d, 12, implicit-def dead early-clobber $r4d, 12, implicit-def dead early-clobber $r5d, 12, implicit-def dead early-clobber $r6d, 12, implicit-def dead early-clobber $r7d, 12, implicit-def dead early-clobber $r8d, 12, implicit-def dead early-clobber $r9d, 12, implicit-def dead early-clobber $r10d, 12, implicit-def dead early-clobber $r11d, 12, implicit-def dead early-clobber $r12d, 12, implicit-def dead early-clobber $r13d, 12, implicit-def dead early-clobber $r14d, 12, implicit-def dead early-clobber $f1d, 12, implicit-def dead early-clobber $f2d, 12, implicit-def dead early-clobber $f3d, 12, implicit-def dead early-clobber $f4d, 12, implicit-def dead early-clobber $f5d, 12, implicit-def dead early-clobber $f6d, 12, implicit-def dead early-clobber $f7d, 12, implicit-def dead early-clobber $f8d, 12, implicit-def dead early-clobber $f9d, 12, implicit-def dead early-clobber $f10d, 12, implicit-def dead early-clobber $f11d, 12, implicit-def dead early-clobber $f12d, 12, implicit-def dead early-clobber $f13d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f14d, 12, implicit-def dead early-clobber $f15d
    %3:vr32bit = nofpexcept WFMSB %1, %0, implicit $fpc
    VST32 %3, %2, 0, $noreg :: (store 4 into %ir.Dst)
    Return

...
