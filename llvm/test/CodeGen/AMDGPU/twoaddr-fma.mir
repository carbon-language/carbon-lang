# RUN: llc -march=amdgcn -mcpu=gfx1010 %s -run-pass twoaddressinstruction -verify-machineinstrs -o - | FileCheck -check-prefix=GCN %s

# GCN-LABEL: name: test_fmamk_reg_imm_f32
# GCN: V_FMAMK_F32 killed %0.sub0, 1078523331, killed %1, implicit $exec
---
name:            test_fmamk_reg_imm_f32
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
  - { id: 3, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = COPY %0.sub1
    %2 = V_MOV_B32_e32 1078523331, implicit $exec
    %3 = V_FMAC_F32_e32 killed %0.sub0, %2, killed %1, implicit $exec

...

# GCN-LABEL: name: test_fmamk_imm_reg_f32
# GCN: V_FMAMK_F32 killed %0.sub0, 1078523331, killed %1, implicit $exec
---
name:            test_fmamk_imm_reg_f32
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
  - { id: 3, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = COPY %0.sub1
    %2 = V_MOV_B32_e32 1078523331, implicit $exec
    %3 = V_FMAC_F32_e32 %2, killed %0.sub0, killed %1, implicit $exec

...

# GCN-LABEL: name: test_fmaak_f32
# GCN: V_FMAAK_F32 killed %0.sub0, %0.sub1, 1078523331, implicit $exec
---
name:            test_fmaak_f32
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = V_MOV_B32_e32 1078523331, implicit $exec
    %2 = V_FMAC_F32_e32 killed %0.sub0, %0.sub1, %1, implicit $exec

...

# GCN-LABEL: name: test_fmamk_reg_imm_f16
# GCN: V_FMAMK_F16 killed %0.sub0, 1078523331, killed %1, implicit $exec
---
name:            test_fmamk_reg_imm_f16
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
  - { id: 3, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = COPY %0.sub1
    %2 = V_MOV_B32_e32 1078523331, implicit $exec
    %3 = V_FMAC_F16_e32 killed %0.sub0, %2, killed %1, implicit $exec

...

# GCN-LABEL: name: test_fmamk_imm_reg_f16
# GCN: V_FMAMK_F16 killed %0.sub0, 1078523331, killed %1, implicit $exec
---
name:            test_fmamk_imm_reg_f16
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
  - { id: 3, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = COPY %0.sub1
    %2 = V_MOV_B32_e32 1078523331, implicit $exec
    %3 = V_FMAC_F16_e32 %2, killed %0.sub0, killed %1, implicit $exec

...

# GCN-LABEL: name: test_fmaak_f16
# GCN: V_FMAAK_F16 killed %0.sub0, %0.sub1, 1078523331, implicit $exec
---
name:            test_fmaak_f16
registers:
  - { id: 0, class: vreg_64 }
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = V_MOV_B32_e32 1078523331, implicit $exec
    %2 = V_FMAC_F16_e32 killed %0.sub0, %0.sub1, %1, implicit $exec
...

# GCN-LABEL: name: test_fmaak_sgpr_src0_f32
# GCN: %2:vgpr_32 = V_FMAMK_F32 killed %0, 1078523331, %3:vgpr_32, implicit $exec

---
name:            test_fmaak_sgpr_src0_f32
registers:
  - { id: 0, class: sreg_32_xm0 }
  - { id: 1, class: vgpr_32}
  - { id: 2, class: vgpr_32 }
  - { id: 3, class: vgpr_32 }
body:             |
  bb.0:

    %0 = IMPLICIT_DEF
    %1 = V_MOV_B32_e32 1078523331, implicit $exec
    %2 = V_FMAC_F32_e32 killed %0, %1, %3, implicit $exec

...

# GCN-LABEL: name: test_fmaak_inlineimm_src0_f32
# GCN: %1:vgpr_32 = V_FMAMK_F32 1073741824, 1078523331, %2:vgpr_32, implicit $exec

---
name:            test_fmaak_inlineimm_src0_f32
registers:
  - { id: 0, class: vgpr_32}
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
body:             |
  bb.0:

    %0 = V_MOV_B32_e32 1078523331, implicit $exec
    %1 = V_FMAC_F32_e32 1073741824, %0, %2, implicit $exec

...

# GCN-LABEL: name: test_fmaak_otherimm_src0_f32
# GCN: %1:vgpr_32 = V_FMAC_F32_e32 1120403456, %0, %1, implicit $exec

---
name:            test_fmaak_otherimm_src0_f32
registers:
  - { id: 0, class: vgpr_32}
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
body:             |
  bb.0:

    %0 = V_MOV_B32_e32 1078523331, implicit $exec
    %1 = V_FMAC_F32_e32 1120403456, %0, %2, implicit $exec

...

# GCN-LABEL: name: test_fmaak_other_constantlike_src0_f32
# GCN: %1:vgpr_32 = V_FMAC_F32_e32 %stack.0, %0, %1, implicit $exec
---
name:            test_fmaak_other_constantlike_src0_f32
registers:
  - { id: 0, class: vgpr_32}
  - { id: 1, class: vgpr_32 }
  - { id: 2, class: vgpr_32 }
stack:
  - { id: 0, name: "", type: default, offset: 0, size: 128, alignment: 8,
      callee-saved-register: '', local-offset: 0, debug-info-variable: '',
      debug-info-expression: '', debug-info-location: '' }
body:             |
  bb.0:

    %0 = V_MOV_B32_e32 1078523331, implicit $exec
    %1 = V_FMAC_F32_e32 %stack.0, %0, %2, implicit $exec

...
