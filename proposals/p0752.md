# `api` file default-`public`

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/752)

<!-- toc -->

## Table of contents

-   [Problem](#problem)
-   [Background](#background)
-   [Proposal](#proposal)
-   [Rationale based on Carbon's goals](#rationale-based-on-carbons-goals)
-   [Alternatives considered](#alternatives-considered)
    -   [Default private](#default-private)

<!-- tocstop -->

## Problem

Question for leads
[#665: private vs public _syntax_ strategy, as well as other visibility tools like external/api/etc.](https://github.com/carbon-language/carbon-lang/issues/665)
decided that methods on classes should default to public. Should `api` echo the
similar strategy?

## Background

-   In C++, `struct` members default public, while `class` members default
    `public`.
-   In proposal
    [#107: Code and name organization](https://github.com/carbon-language/carbon-lang/pull/107),
    an `api` keyword was used to indicate public APIs within an `api` file.
-   In [#665](https://github.com/carbon-language/carbon-lang/issues/665), it was
    decided that Carbon class members should default `public`.

## Proposal

APIs in the `api` file should default public, without need for an additional
`api` keyword. `private` may be specified to designate APIs that are internal to
the library, and only visible to `impl` files.

Nothing is necessary within `impl` files, and APIs there will be private unless
forward declared in the `api` file.

## Rationale based on Carbon's goals

-   [Code that is easy to read, understand, and write](/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write):
    It will be easier for developers to understand code if APIs have
    semantically similar behavior when comparing the visibility of class methods
    to other code, and the library to other packages.

## Alternatives considered

### Default private

Default private is what was implied by `api`, and was the previous state.

Advantages:

-   Decreases the likelihood that developers will accidentally expose APIs,
    because it's an explicit choice.

Disadvantages:

-   The `api` file's primary purpose is to expose APIs, and so it may be more
    natural for developers to assume things there are public.
