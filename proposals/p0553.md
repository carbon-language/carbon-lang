# Generics details part 1

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/553)

<!-- toc -->

## Table of contents

-   [Problem](#problem)
-   [Background](#background)
-   [Proposal](#proposal)
-   [Rationale based on Carbon's goals](#rationale-based-on-carbons-goals)
-   [Alternatives considered](#alternatives-considered)
    -   [Interface implementation syntax](#interface-implementation-syntax)
        -   [`for` instead of `as` in external `impl`](#for-instead-of-as-in-external-impl)
        -   [No `as` for inline `impl`](#no-as-for-inline-impl)
        -   [No `external` for external `impl`](#no-external-for-external-impl)
        -   [Out-of-line impl](#out-of-line-impl)
        -   [`extend` blocks](#extend-blocks)
    -   [Others](#others)

<!-- tocstop -->

## Problem

We want to Carbon to have a high quality generics feature that achieves the
goals set out in [#24](https://github.com/carbon-language/carbon-lang/pull/24).
This is too big to land in a single proposal. This proposal goes into the
details of the core of the feature, and provides an outline covering future
work. It covers:

-   interfaces
-   implementing interfaces for types
-   resolving name conflicts
-   facet types
-   type-types as the way of describing type variables
-   structural interfaces
-   combining interfaces
-   interface requirements and extension
-   type compatibility

## Background

This is a follow on to these previous generics proposals:

-   [Generics goals #24](https://github.com/carbon-language/carbon-lang/pull/24)
-   [Generics terminology #447](https://github.com/carbon-language/carbon-lang/pull/447)
-   [Generics overview #524](https://github.com/carbon-language/carbon-lang/pull/524)

The content for this proposal was extracted from a larger
[Generics combined draft proposal](https://github.com/carbon-language/carbon-lang/pull/36).

## Proposal

This is a proposal to add
[this detailed design document](/docs/design/generics/details.md).

## Rationale based on Carbon's goals

Much of this rationale was captured in the
[Generics goals proposal](https://github.com/carbon-language/carbon-lang/pull/24).

## Alternatives considered

### Interface implementation syntax

The interface implementation syntax was decided in
[question-for-leads issue #575](https://github.com/carbon-language/carbon-lang/issues/575).
This proposal includes additional discussion and additional alternatives.

FIXME: Migrate content from
[this Google doc](https://docs.google.com/document/d/17EOg9YL1m-iigf8zfVX5OxKa0vS9TBVlw33WsBLXbxY/edit#).

#### `for` instead of `as` in external `impl`

FIXME

#### No `as` for inline `impl`

FIXME

#### No `external` for external `impl`

FIXME

#### Out-of-line impl

We considered an out-of-line syntax for declaring and defining interface `impl`
blocks, to replace both the inline syntax and the `external impl` statement.
For, example:

```
struct Point { ... }
impl Vector for Point { ... }
```

The main advantage of this syntax was that it was uniform across many cases,
including [conditional conformance](details.md#conditional-conformance). It
wasn't ideal across a number of dimensions though.

-   It repeated the type name which was redundant and verbose
-   It could affect the API of the type outside of the type definition.
-   We prefer the type name before the interface name (using `as), instead of
    this ordering used by Rust.

#### `extend` blocks

Instead of the `external impl` statement, we considered putting all external
implementations in an `extend` block.

```
struct Point { ... }
extend Point {
  impl Vector { ... }
}
```

The `extend` approach had some disadvantages:

-   Implementations were indented more than the `external impl` approach.
-   Extra ceremony in the case of only implementing one type for an interface.
    This case is expected to be common since external implementations will most
    often be defined with the interface.
-   When implementing multiple interfaces in a single `extend` block, the name
    of the type being extended could be far from the `impl` declaration and hard
    to find.

### Others

Other alternatives considered will be in a future proposal. Some of them can be
seen in a rough form in
[#36](https://github.com/carbon-language/carbon-lang/pull/36).
