# Update sum types design

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/2187)

<!-- toc -->

## Table of contents

-   [Abstract](#abstract)
-   [Problem](#problem)
-   [Proposal](#proposal)
-   [Alternatives considered](#alternatives-considered)
    -   [Keep the continuation interface as a parameter](#keep-the-continuation-interface-as-a-parameter)

<!-- tocstop -->

## Abstract

This proposal updates the design of [p0157](p0157.md) to reflect subsequent
evolution of the language.

## Problem

Some aspects of the design of #157 have become inconsistent with the rest of the
language, or can be made more precise in light of subsequent language
development.

## Proposal

-   Make the continuation interface an associated type rather than an interface
    parameter.
-   For patterns that can be matched using either `Match` or `==`, require both
    implementations to be well-formed.
-   Use `name: Type` order instead of `Type: name` order in alternative
    declarations.
-   Use current syntax and semantics for generics and class types.
-   Rename `Matchable.Match` to `Match.Op`, following the resolution of
    [#1058](https://github.com/carbon-language/carbon-lang/issues/1058).

## Alternatives considered

### Keep the continuation interface as a parameter

Making the continuation interface a parameter of `Match` could in principle
allow a single type to support pattern matching in multiple ways, by
implementing `Match` for multiple continuation interfaces. However, that would
require something like overload resolution on interfaces, to choose the
implementation of `Match(C)` on the sum type for which `C` best matches the
continuation constructed by the compiler. No such overloading mechanism is
planned, and we don't have sufficiently compelling use cases to motivate it.
