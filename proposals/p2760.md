# Consistent `class` and `interface` syntax

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/2760)

<!-- toc -->

## Table of contents

-   [Abstract](#abstract)
-   [Problem](#problem)
-   [Background](#background)
-   [Proposal](#proposal)
-   [Details](#details)
    -   [Class inheritance](#class-inheritance)
    -   [Class implementation](#class-implementation)
    -   [Class conditional implementation](#class-conditional-implementation)
    -   [Adapters](#adapters)
    -   [Interfaces](#interfaces)
-   [Future work: mixins](#future-work-mixins)
-   [Rationale](#rationale)
-   [Alternatives considered](#alternatives-considered)

<!-- tocstop -->

## Abstract

Update syntax of `class` and `interface` definitions to be more consistent.
Constructs that add names to the class or interface from another definition are
always prefixed by the `extend` keyword.

Implements the decision in
[#995: Generics external impl versus extends](https://github.com/carbon-language/carbon-lang/issues/995).

## Problem

Classes and adapters, prior to this proposal, use `impl` to say that an
interface is
[implemented internally](https://github.com/carbon-language/carbon-lang/blob/trunk/docs/design/generics/terminology.md#internal-impl),
which means that the names that are members of the interface are included as
names of the class. The keyword `external` is added to indicate the names should
not be included. Interfaces and named constraints, in contrast, use `impl` to
mean another interface is required, but its names are not included. Instead, to
include the names, the `extends` keyword used instead of `impl`.

| Include names:            | Yes       | No              |
| ------------------------- | --------- | --------------- |
| `class`, `adapter`        | `impl`    | `external impl` |
| `interface`, `constraint` | `extends` | `impl`          |

In addition to resolving this inconsistency, it would be an advantage if readers
of a class could quickly scan the definition to identify other places to look
for members that contribute to the class' API.

## Background

These proposals that defined the syntax for these entities that are being
modified:

-   [#553: Generics details part 1](https://github.com/carbon-language/carbon-lang/pull/553)
    defined the syntax for classes implementing interfaces, internally or
    externally, and the syntax for named constraints (then "structural
    interfaces") and interfaces requiring or extending other interfaces.
-   [#731: Generics details 2: adapters, associated types, parameterized interfaces](https://github.com/carbon-language/carbon-lang/pull/731)
    defined the syntax for adapters and extending adapters.
-   [#1084: Generics details 9: forward declarations](https://github.com/carbon-language/carbon-lang/pull/1084)
    allowed forward declaration of implementations, so internal `impl`
    declarations may appear outside of a class definition, and `external impl`
    declarations may appear inside.

This proposal incorporates the decisions made in these question-for-leads
issues:

-   [#995: Generics external impl versus extends](https://github.com/carbon-language/carbon-lang/issues/995),
-   [#1159: adaptor versus adapter may be harder to spell than we'd like](https://github.com/carbon-language/carbon-lang/issues/1159),
    and
-   [#2580: How should Carbon handle conditionally implemented internal interfaces](https://github.com/carbon-language/carbon-lang/issues/2580).

## Proposal

Any declaration that adds the names from another entity shall start with the
(new) `extend` keyword. Neither `extends` nor `external` will continue to be
keywords.

| Before                          | After                                  |
| ------------------------------- | -------------------------------------- |
| `class D extends B { ... }`     | `class D { extend base: B; ... }`      |
| `external impl C as Sub;`       | `impl C as Sub;`                       |
| `class C { impl as Sortable; }` | `class C { extend impl as Sortable; }` |
| `adapter A for C { ... }`       | `class A { adapt C; ... }`             |
| `adpater A extends C { ... }`   | `class A { extend adapt C; ... }`      |

## Details

### Class inheritance

FIXME

### Class implementation

FIXME

### Class conditional implementation

FIXME

### Adapters

FIXME

### Interfaces

FIXME

## Future work: mixins

FIXME

## Rationale

TODO: How does this proposal effectively advance Carbon's goals? Rather than
re-stating the full motivation, this should connect that motivation back to
Carbon's stated goals and principles. This may evolve during review. Use links
to appropriate sections of [`/docs/project/goals.md`](/docs/project/goals.md),
and/or to documents in [`/docs/project/principles`](/docs/project/principles).
For example:

-   [Language tools and ecosystem](/docs/project/goals.md#language-tools-and-ecosystem)
-   [Code that is easy to read, understand, and write](/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write)

Consistency is also easier to teach.

## Alternatives considered

Keyword `extend` was chosen over `extends` to parallel `impl`, a declaration,
instead of `impls`, a binary predicate, decided in
[issue #2495](https://github.com/carbon-language/carbon-lang/issues/2495) and
accepted in
[proposal #2483](https://github.com/carbon-language/carbon-lang/pull/2483).
