# Code and name organization

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/107)

## Table of contents

<!-- toc -->

-   [Problem](#problem)
-   [Proposal](#proposal)
    -   [Out-of-scope issues](#out-of-scope-issues)
-   [Open questions for the decision](#open-questions-for-the-decision)
    -   [Should we remove one of the `namespace` keywords?](#should-we-remove-one-of-the-namespace-keywords)
-   [Justification](#justification)

<!-- tocstop -->

## Problem

How do developers store code for the compiler, and access it for reuse?

## Proposal

Adopt an approach with tiered files, libraries, packages and namespaces in the
design.

### Out-of-scope issues

Related issues that are out-of-scope for this proposal are:

-   Access control: while there is some implicit access control from interface
    vs implementation considerations for libraries, they are more about
    addressing circular dependencies in code.

-   Compilation details: this proposal sets up a framework that should enable
    well-designed compilation, but does not set about to design how compilation
    will work.

-   Package management: while we want to choose syntax that won't impose
    barriers on building package management into Carbon, we should not make
    assumptions about how package management should work.

-   Prelude package, or fundamentals: while we've discussed how to handle name
    lookup for things like `Int32`, this proposal mainly lays out a framework
    where options for addressing that are possible.

This proposal should not be interpreted as addressing these issues. A separate
discussion of these issues will remain necessary.

## Open questions for the decision

### Should we remove one of the `namespace` keywords?

Right now, the `namespace` keyword can be used in two places:

-   On the `package` keyword
    ([alternative to remove](/docs/design/code_and_name_organization.md#remove-the-namespace-keyword-from-package-and-import))
-   On its own
    ([alternative to remove](/docs/design/code_and_name_organization.md#coarser-namespace-granularity))

Is the core team okay with two ways to specify namespaces, given the associated
trade-offs?

## Justification

-   [Software and language evolution](/docs/project/goals.md#software-and-language-evolution):

    -   The syntax and interactions between `package` and `import` should enable
        moving code between files and libraries with fewer modifications to
        callers, easing maintainenance of large codebases.

        -   In C++ terms, `#include` updates are avoidable.

-   [Code that is easy to read, understand, and write](/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write):

    -   By setting up imports so that each name in a file is unique, we make the
        meaning of symbols clear and easier to understand.

    -   The proposed `namespace` syntax additionally makes it clear when the
        file's default namespace is not being used, particularly as an
        improvement over C++'s `namespace` syntax.

    -   Clearly marking interfaces will make it easier for both client code and
        IDE tab completion to more easily determine which APIs can be used from
        a given library.

-   [Fast and scalable development](/docs/projects/goals.md#fast-and-scalable-development):

    -   The structure of libraries and imports should help enable separate
        compilation.

-   [Interoperability with and migration from existing C++ code](/docs/project/goals.md#interoperability-with-and-migration-from-existing-c-code):

    -   The syntax of `import` should enable extending imports for use in
        interop code.
