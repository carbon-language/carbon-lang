// Part of the Carbon Language project, under the Apache License v2.0 with LLVM
// Exceptions. See /LICENSE for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception

// Test that a sequence of `__resume` statements causes control to
// go from one `__yield` to the next within a delimited continuation.

fn main() -> Int {
  var Int: x = 0;

  __delimit {
    __yield 1;
    __yield 2;
    __yield 3;
  } __catch (v1,k1)  {
    x = x + v1;
    __delimit {
      __resume k1;
    } __catch (v2,k2) {
      x = x + v2;
      __delimit {
        __resume k2;
      } __catch(v3,_) {
        x = x + v3;
      }
    }

  }
  return x;
}
