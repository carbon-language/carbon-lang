// Part of the Carbon Language project, under the Apache License v2.0 with LLVM
// Exceptions. See /LICENSE for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception

fn naturals() -> () {
  var Int: n = 0;
  __yield n;
  while (true) {
    n = n + 1;
    __yield n;
  }
}

fn main() -> Int {
  var Int: sum = 0;
  var Int: count = 0;
  __delimit {
    naturals();
    return 1;
  } __catch (v, k) {
    sum = sum + v;
    count = count + 1;
    if (count == 5) {
      return sum - 10;
    } else {
      __resume k;
    }
  }
}
