
@import DependsOnModule;

// RUN: rm -rf %t %t-obj
// RUN: %clang_cc1 -w -Wunused -fmodules -fmodule-format=obj -fimplicit-module-maps -fdisable-module-hash -fmodules-cache-path=%t-obj -F %S/Inputs -DBLARG -DWIBBLE=WOBBLE -fmodule-feature myfeature %s
// RUN: %clang -module-file-info %t-obj/DependsOnModule.pcm | FileCheck %s
// RUN: %clang -module-file-info %t-obj/DependsOnModule.pcm | FileCheck %s

// This test is just verifying that the clang driver doesn't delete the input
// file when -module-file-info is passed. We verify this by dumping the module
// twice subsequently. We have other tests to verify the contents of the module
// and the tool output (see: module_file_info.m)

// CHECK: Generated by this Clang:

// CHECK: Module name: DependsOnModule
