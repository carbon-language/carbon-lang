// Part of the Carbon Language project, under the Apache License v2.0 with LLVM
// Exceptions. See /LICENSE for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
// Note that this is an X-macro header.
//
// It does not use `#include` guards, and instead is designed to be `#include`ed
// after the x-macro is defined in order for its inclusion to expand to the
// desired output. The x-macro for this header is `CARBON_PARSE_NODE_KIND`. The
// definition provided will be removed at the end of this file to clean up.

#ifndef CARBON_PARSER_STATE
#error "Must define the x-macro to use this file."
#endif

// Handles the `{` of a brace expression.
CARBON_PARSER_STATE(BraceExpression)

// Handles a brace expression parameter. Note this will always start as unknown,
// but should be known after the first valid parameter. All later inconsistent
// parameters are invalid.
CARBON_PARSER_STATE(BraceExpressionParameterAsType)
CARBON_PARSER_STATE(BraceExpressionParameterAsValue)
CARBON_PARSER_STATE(BraceExpressionParameterAsUnknown)

// Handles a brace expression parameter after the initial designator. This
// should be at a `:` or `=`, depending on whether it's a type or value literal.
CARBON_PARSER_STATE(BraceExpressionParameterAfterDesignatorAsType)
CARBON_PARSER_STATE(BraceExpressionParameterAfterDesignatorAsValue)
CARBON_PARSER_STATE(BraceExpressionParameterAfterDesignatorAsUnknown)

// Handles the end of a brace expression parameter.
CARBON_PARSER_STATE(BraceExpressionParameterFinishAsType)
CARBON_PARSER_STATE(BraceExpressionParameterFinishAsValue)
CARBON_PARSER_STATE(BraceExpressionParameterFinishAsUnknown)

// Handles the `}` of a brace expression.
CARBON_PARSER_STATE(BraceExpressionFinishAsType)
CARBON_PARSER_STATE(BraceExpressionFinishAsValue)
CARBON_PARSER_STATE(BraceExpressionFinishAsUnknown)

// Handles a call expression `(...)`.
CARBON_PARSER_STATE(CallExpression)

// Handles the `,` or `)` after a call parameter.
CARBON_PARSER_STATE(CallExpressionParameterFinish)

// Handles finishing the call expression.
CARBON_PARSER_STATE(CallExpressionFinish)

// Handles processing at the `}` on a typical code block, after a statement
// scope is done.
CARBON_PARSER_STATE(CodeBlockFinish)

// Handles processing of a declaration scope. Things like fn, class, interface,
// and so on.
CARBON_PARSER_STATE(Declaration)

// Handles a designator expression, such as `.z` in `x.(y.z)`.
CARBON_PARSER_STATE(DesignatorExpression)

// As with DesignatorExpression, but for a struct literal.
CARBON_PARSER_STATE(DesignatorExpressionAsStruct)

// Handles processing of an expression.
CARBON_PARSER_STATE(Expression)

// Handles processing of an expression.
CARBON_PARSER_STATE(ExpressionLoop)

// Completes an ExpressionLoop pass by adding an infix operator, then goes back
// to ExpressionLoop.
CARBON_PARSER_STATE(ExpressionLoopForBinary)

// Completes an ExpressionLoop pass by adding a prefix operator, then goes back
// to ExpressionLoop.
CARBON_PARSER_STATE(ExpressionLoopForPrefix)

// Handles the initial part of postfix expressions, such as an identifier or
// literal value, then proceeds to the loop.
CARBON_PARSER_STATE(ExpressionInPostfix)

// Handles looping through elements following the initial postfix expression,
// such as designators or parenthesized parameters.
CARBON_PARSER_STATE(ExpressionInPostfixLoop)

// Handles the `;` for an expression statement, which is different from most
// keyword statements.
CARBON_PARSER_STATE(ExpressionStatementFinish)

// Handles processing of a function's `fn <name>(`, and enqueues parameter list
// handling.
CARBON_PARSER_STATE(FunctionIntroducer)

// Handles processing of a function's parameter list `)`.
CARBON_PARSER_STATE(FunctionParameterListFinish)

// Handles processing of a function's syntax after `)`, primarily the
// possibility a `->` return type is there. Always enqueues signature finish
// handling.
CARBON_PARSER_STATE(FunctionAfterParameterList)

// Finishes a function return type.
CARBON_PARSER_STATE(FunctionReturnTypeFinish)

// Finishes a function signature. If it's a declaration, the function is done;
// otherwise, this also starts definition processing.
CARBON_PARSER_STATE(FunctionSignatureFinish)

// Finishes a function definition.
CARBON_PARSER_STATE(FunctionDefinitionFinish)

// Handles `package`.
CARBON_PARSER_STATE(Package)

// Handles the processing of a `(condition)` up through the expression.
CARBON_PARSER_STATE(ParenCondition)

// Finishes the processing of a `(condition)` after the expression.
CARBON_PARSER_STATE(ParenConditionFinish)

// Handles the `(` of a parenthesized expression.
CARBON_PARSER_STATE(ParenExpression)

// Handles the end of the first parameter of a parenthesized expression. If
// there are more, it switches to AsTuple processing.
CARBON_PARSER_STATE(ParenExpressionParameterFinish)

// Handles the second and later parameters of a parenthesized expression,
// specifically as a tuple.
CARBON_PARSER_STATE(ParenExpressionParameterFinishAsTuple)

// Handles the `)` of a parenthesized expression.
CARBON_PARSER_STATE(ParenExpressionFinish)

// Handles the `)` of a tuple.
CARBON_PARSER_STATE(ParenExpressionFinishAsTuple)

// Handles pattern parsing for a function parameter, enqueuing type expression
// processing. Proceeds to the matching Finish state when done.
CARBON_PARSER_STATE(PatternForFunctionParameter)

// Finishes function parameter processing, including `,`. If there are more
// parameters, enqueues another parameter processing state.
CARBON_PARSER_STATE(PatternForFunctionParameterFinish)

// Handles pattern parsing for a `var` statement, enqueuing type expression
// processing. Proceeds to the matching Finish state when done.
CARBON_PARSER_STATE(PatternForVariable)

// Finishes `var` pattern processing.
CARBON_PARSER_STATE(PatternForVariableFinish)

// Handles `break` processing at the `;`.
CARBON_PARSER_STATE(StatementBreakFinish)

// Handles `continue` processing at the `;`.
CARBON_PARSER_STATE(StatementContinueFinish)

// Handles `for` processing of `(var`, proceeding to a pattern before
// continuing.
CARBON_PARSER_STATE(StatementForHeader)

// Handles `for` procesisng of `in`, proceeding to an expression before
// continuing.
CARBON_PARSER_STATE(StatementForHeaderIn)

// Handles `for` processing of `)`, proceeding to the statement block.
CARBON_PARSER_STATE(StatementForHeaderFinish)

// Handles `for` processing at the final `}`.
CARBON_PARSER_STATE(StatementForFinish)

// Handles `if` processing between the condition and start of the first code
// block.
CARBON_PARSER_STATE(StatementIfConditionFinish)

// Handles `if` processing after the end of the first code block, with the
// optional `else`.
CARBON_PARSER_STATE(StatementIfThenBlockFinish)

// Handles `if` processing after a provided `else` code block.
CARBON_PARSER_STATE(StatementIfElseBlockFinish)

// Handles `return` processing at the `;`.
CARBON_PARSER_STATE(StatementReturnFinish)

// Handles `while` processing between the condition and start of the code block.
CARBON_PARSER_STATE(StatementWhileConditionFinish)

// Handles `while` processing after the end of the code block.
CARBON_PARSER_STATE(StatementWhileBlockFinish)

// Handles processing of statements within a scope.
CARBON_PARSER_STATE(StatementScopeLoop)

// Handles `var` after the pattern, either followed by an initializer or the
// semicolon.
CARBON_PARSER_STATE(VarAfterPattern)

// Handles `var` after the initializer, wrapping up its subtree.
CARBON_PARSER_STATE(VarAfterInitializer)

// Handles `var` parsing at the end, with a semicolon.
CARBON_PARSER_STATE(VarFinishWithSemicolon)

// Handles `var` parsing at the end, without a semicolon.
CARBON_PARSER_STATE(VarFinishWithoutSemicolon)

#undef CARBON_PARSER_STATE
